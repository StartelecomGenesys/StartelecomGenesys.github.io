<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title> Oakville Hydro </title>
		<script type="text/javascript" charset="utf-8">

	  function start(){			
			var open_closed = checkhours();			
		}
	  function toggleVisibility() {
						  (function (g, e, n, es, ys) {
				g['_genesysJs'] = e;
			g[e] = g[e] || function () {
			  (g[e].q = g[e].q || []).push(arguments)
			};
			g[e].t = 1 * new Date();
			g[e].c = es;
			ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
		  })(window, 'Genesys', 'https://apps.cac1.pure.cloud/genesys-bootstrap/genesys.min.js', {
			environment: 'cac1',
			deploymentId: 'a0929966-2315-470c-96d7-470874d34302',
				debug: true
			  });
		}
			
function checkhours(){
			
fetch("https://e69jfedg3a.execute-api.ca-central-1.amazonaws.com/default/CheckSchedule", {
     
    // Adding method type
    method: "POST",
     
    // Adding body or contents to send
    body: JSON.stringify({
				orgName:"oakville",
				region:"ca",
				scheduleGroupId:"a18b7ff2-ae91-4f81-9f94-c08ee88418d2",
				emergencyGroupId:"5269c72d-d8ef-48cb-bb03-f2cc1975b584"
    }),
     
    // Adding headers to the request
    headers: {
        "Content-Type":"application/json"
    }
})
 
// Converting to JSON
.then(response => {return response.json()})
 
// Displaying results to console
.then(function (data){
	//prvi poziv apija puca
	console.log(data);
	console.log(data.open);
	if (data.open)
		{
			toggleVisibility();
		}
});


}
		
				
	
	window.onload = start;
</script>
		
	</head>

	
</html>